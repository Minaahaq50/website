<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE BEST - Ù…Ù†ØµØ© Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</title>
  <style>
    body { font-family: 'Cairo', sans-serif; background-color: #0d0d0d; color: #fff; margin: 0; padding: 0; }
    header { background-color: #1a1a1a; padding: 20px; text-align: center; font-size: 22px; font-weight: bold; color: #ffd700; box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3); letter-spacing: 1px; }
    #countdown-box { display:flex; justify-content:center; gap:15px; font-size:18px; font-weight:bold; }
    .time-block { background: #333; padding: 8px 12px; border-radius: 10px; min-width: 60px; text-align: center; color: #ffd700; }
    .time-block span { font-size: 20px; display: block; }
    #expired-msg { font-size: 24px; font-weight: bold; color: red; animation: shake 0.5s infinite, blink 1s infinite; display: none; }
    @keyframes shake { 0%{transform:translateX(0)}25%{transform:translateX(-5px)}50%{transform:translateX(5px)}75%{transform:translateX(-5px)}100%{transform:translateX(0)} }
    @keyframes blink { 0%,50%,100%{opacity:1}25%,75%{opacity:0} }

    .filter-bar { display: none; justify-content: center; gap: 10px; margin: 20px; flex-wrap: wrap; }
    .filter-bar button { background-color: #2b2b2b; color: #ffd700; border: 1px solid #444; padding: 10px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; transition: all 0.2s ease-in-out; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); }
    .filter-bar button:hover { background-color: #3a3a3a; transform: scale(1.05); box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
    .filter-bar button:active { transform: scale(0.95); box-shadow: inset 0 0 8px rgba(255, 215, 0, 0.2); }

    #teachers-filter { text-align: center; margin-bottom: 20px; }
    #teachers-filter button { margin: 0 10px; padding: 8px 16px; border-radius: 8px; border: none; background-color: #444; color: #ffd700; cursor: pointer; font-weight: bold; transition: background-color 0.3s ease; }
    #teachers-filter button:hover { background-color: #555; }
    #teachers-filter button.active { background-color: #ffd700; color: #1a1a1a; }

    #videos-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px; }
    .video-box { background-color: #1a1a1a; padding: 10px; border-radius: 12px; box-shadow: 0 0 10px rgba(255, 215, 0, 0.1); transition: transform 0.2s ease-in-out, box-shadow 0.2s; }
    .video-box:hover { transform: translateY(-5px); box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }
    .video-title { margin: 10px 0 6px 0; font-size: 18px; color: #ffd700; text-align: center; }
    .video-teacher { text-align: center; font-size: 14px; margin-bottom: 10px; color: #bbb; }

    .thumb { position:relative; cursor:pointer; border-radius:10px; overflow:hidden; background:#000; }
    .thumb img { width:100%; display:block; }
    .thumb .play-btn {
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
      font-size:50px; color:#ffd700; text-shadow:0 0 10px rgba(0,0,0,.9);
      user-select:none;
    }

    footer { background-color: #1a1a1a; padding: 20px; text-align: center; color: #888; font-size: 14px; margin-top: 40px; }

    #login-box { text-align: center; margin: 20px; }
    #studentCode { padding: 8px 12px; border-radius: 8px; border: 1px solid #444; margin-left: 10px; }
    #loginBtn { padding: 8px 16px; border-radius: 8px; border: none; background: #ffd700; color: #1a1a1a; font-weight: bold; cursor: pointer; }

    /* Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    #messageBox { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 9999; background: rgba(0,0,0,0.55); }
    #messageBox .card { background:#1a1a1a; border-radius:12px; padding:20px 26px; font-weight:bold; text-align:center; min-width:260px; box-shadow: 0 0 20px rgba(0,0,0,0.6); animation: fadeIn .25s ease-out; border:2px solid #333; color:#fff; }
    #messageBox.success .card{ border-color:#00ff88; color:#00ff88; }
    #messageBox.error .card{ border-color:#ff4444; color:#ff4444; }
    @keyframes fadeIn { from{opacity:0; transform:translateY(-8px)} to{opacity:1; transform:translateY(0)} }
  </style>
</head>
<body>
  <header>
    <section id="countdown-box">
      <div class="time-block"><span id="days">--</span>Ø£ÙŠØ§Ù…</div>
      <div class="time-block"><span id="hours">--</span>Ø³Ø§Ø¹Ø§Øª</div>
      <div class="time-block"><span id="minutes">--</span>Ø¯Ù‚Ø§Ø¦Ù‚</div>
      <div class="time-block"><span id="seconds">--</span>Ø«ÙˆØ§Ù†ÙŠ</div>
    </section>
    <div id="expired-msg">ğŸš« ØªÙ… Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ğŸš«</div>
  </header>

  <div id="login-box">
    <input type="text" id="studentCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ" />
    <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
  </div>

  <div class="filter-bar">
    <button onclick="filterVideos('Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ')">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</button>
    <button onclick="filterVideos('Ø¹Ø±Ø¨ÙŠ')">Ø¹Ø±Ø¨ÙŠ</button>
    <button onclick="filterVideos('ÙÙŠØ²ÙŠØ§Ø¡')">ÙÙŠØ²ÙŠØ§Ø¡</button>
    <button onclick="filterVideos('Ø±ÙŠØ§Ø¶ÙŠØ§Øª')">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</button>
    <button onclick="filterVideos('ÙƒÙŠÙ…ÙŠØ§Ø¡')">ÙƒÙŠÙ…ÙŠØ§Ø¡</button>
    <button onclick="filterVideos('Ø£Ø­ÙŠØ§Ø¡')">Ø£Ø­ÙŠØ§Ø¡</button>
  </div>

  <div id="teachers-filter"></div>

  <main id="videos-container">
    <div class="loading" style="text-align:center; font-size:18px; color:#ffd700;">
      Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ THE BEST.
    </div>
  </main>

  <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ù†ØµØ© THE BEST - 2025</footer>

  <!-- Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
  <div id="messageBox"><div class="card"></div></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAdz_OsGPL5xEq-J72FCkuQezVMhU_FATo",
      authDomain: "website-83e14.firebaseapp.com",
      databaseURL: "https://website-83e14-default-rtdb.firebaseio.com",
      projectId: "website-83e14",
      storageBucket: "website-83e14.appspot.com",
      messagingSenderId: "994953388464",
      appId: "1:994953388464:web:13890d9d1448c45061f675",
      measurementId: "G-CTHDFE44WE"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getDatabase(app);

    const videosContainer = document.getElementById('videos-container');
    const teachersFilter  = document.getElementById('teachers-filter');
    const countdownBox    = document.getElementById('countdown-box');
    const expiredMsg      = document.getElementById('expired-msg');
    const daysEl          = document.getElementById('days');
    const hoursEl         = document.getElementById('hours');
    const minutesEl       = document.getElementById('minutes');
    const secondsEl       = document.getElementById('seconds');

    let allVideos = [];
    let selectedSubject = null;
    let selectedTeacher = null;
    let isLoggedIn = false;

    /* ===== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙŠÙˆØªÙŠÙˆØ¨ ===== */
    const isYouTubeUrl = (url='') => /youtu\.be|youtube\.com/.test(url);
    function getYouTubeId(url=''){
      try{
        const u = new URL(url);
        if (u.hostname.includes('youtu.be')) return u.pathname.replace('/','');
        if (u.searchParams.get('v')) return u.searchParams.get('v');
        // Ø±ÙˆØ§Ø¨Ø· embed
        const m = u.pathname.match(/\/embed\/([^/?#]+)/);
        return m ? m[1] : '';
      }catch{ return ''; }
    }
    const getYTThumb = (id) => id ? `https://img.youtube.com/vi/${id}/hqdefault.jpg` : '';

    /* ===== Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ===== */
    function showMessage(msg, type="success", duration=2000){
      const box = document.getElementById('messageBox');
      const card = box.querySelector('.card');
      card.textContent = msg;
      box.className = type; // success | error
      box.style.display = 'flex';
      clearTimeout(showMessage._t);
      showMessage._t = setTimeout(()=>{ box.style.display='none'; }, duration);
    }

    /* ===== Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„ÙƒÙˆØ¯ ===== */
    document.getElementById('loginBtn').addEventListener('click', loginWithCode);
    document.getElementById('studentCode').addEventListener('keydown', e=>{
      if(e.key === 'Enter') loginWithCode();
    });

    function attachLoginHandlers(){
      const btn = document.getElementById('loginBtn');
      const input = document.getElementById('studentCode');
      if (btn && input){
        btn.addEventListener('click', loginWithCode);
        input.addEventListener('keydown', e=>{ if(e.key==='Enter') loginWithCode(); });
      }
    }

    function loginWithCode(){
      const code = document.getElementById('studentCode').value.trim();
      if(!code){ showMessage("âš  Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ","error"); return; }
      localStorage.setItem('studentCode', code);

      const codeRef = ref(db, `codes/${code}/expire`);
      onValue(codeRef, (snapshot)=>{
        const expireValue = snapshot.val();
        const now = Date.now();
        if (expireValue && now <= parseInt(expireValue)) {
          startCountdown(expireValue);
          document.getElementById('login-box').innerHTML = "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­";
          showMessage("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­","success");
          isLoggedIn = true;
          if (allVideos.length > 0) {
            videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ù…Ø¯Ù‘Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø®Ø§ØµÙ‘Ø© Ø¨Ùƒ Ø´Ù‡Ø±. Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙˆÙ‚ØªÙ‹Ø§ Ù…Ù…ØªØ¹Ù‹Ø§.</div>';
            document.querySelector('.filter-bar').style.display = 'flex';
          } else {
            renderLoginRequired();
          }
        } else {
          showMessage("âŒ Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ","error");
          localStorage.removeItem('studentCode');
          isLoggedIn = false;
          renderLoginRequired();
        }
      }, { onlyOnce: true });
    }

    /* ØªØ­Ù‚Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ */
    const savedCode = localStorage.getItem('studentCode');
    if (savedCode){
      const codeRef = ref(db, `codes/${savedCode}/expire`);
      onValue(codeRef, (snapshot)=>{
        const expireValue = snapshot.val();
        const now = Date.now();
        if (expireValue && now <= parseInt(expireValue)) {
          startCountdown(expireValue);
          document.getElementById('login-box').innerHTML = "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­";
          isLoggedIn = true;
          if (allVideos.length > 0) {
            videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ù…Ø¯Ù‘Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø®Ø§ØµÙ‘Ø© Ø¨Ùƒ Ø´Ù‡Ø±. Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙˆÙ‚ØªÙ‹Ø§ Ù…Ù…ØªØ¹Ù‹Ø§.</div>';
            document.querySelector('.filter-bar').style.display = 'flex';
          } else {
            renderLoginRequired();
          }
        } else {
          localStorage.removeItem('studentCode');
          isLoggedIn = false;
          renderLoginRequired();
        }
      }, { onlyOnce: true });
    }

    /* ===== Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ===== */
    function startCountdown(endTimestamp){
      const end = parseInt(endTimestamp);
      const interval = setInterval(()=>{
        const now = Date.now();
        const distance = end - now;

        if (distance <= 0){
          clearInterval(interval);
          countdownBox.style.display = 'none';
          expiredMsg.style.display = 'block';
          isLoggedIn = false;
          localStorage.removeItem('studentCode');

          // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø®ÙˆÙ„
          document.getElementById('login-box').innerHTML = `
            <input type="text" id="studentCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ" />
            <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
          `;
          attachLoginHandlers();

          videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ø´ØªØ±Ø§Ùƒ ØµØ§Ù„Ø­ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</div>';
          teachersFilter.innerHTML = '';
          document.querySelector('.filter-bar').style.display = 'none';
          return;
        }

        const days    = Math.floor(distance / (1000*60*60*24));
        const hours   = Math.floor((distance % (1000*60*60*24)) / (1000*60*60));
        const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
        const seconds = Math.floor((distance % (1000*60)) / 1000);

        daysEl.textContent    = days;
        hoursEl.textContent   = hours;
        minutesEl.textContent = minutes;
        secondsEl.textContent = seconds;
      }, 1000);
    }

    /* ===== ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ===== */
    function renderLoginRequired(){
      videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:red;">âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</div>';
      teachersFilter.innerHTML = '';
      document.querySelector('.filter-bar').style.display = 'none';
    }

    function renderTeachers(subject){
      if(!isLoggedIn){ renderLoginRequired(); return; }
      teachersFilter.innerHTML = '';
      selectedTeacher = null;

      const teachersSet = new Set(
        allVideos
          .filter(v => (v.subject || '').trim() === subject)
          .map(v => (v.teacher || 'Ù…Ø¯Ø±Ø³ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ').trim())
      );

      if (teachersSet.size === 0){
        teachersFilter.innerHTML = '<div style="text-align:center; color:#ffd700; font-size:18px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¯Ø±Ø³ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ† Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©.</div>';
        return;
      }

      teachersSet.forEach(teacher=>{
        const btn = document.createElement('button');
        btn.textContent = teacher;
        btn.onclick = ()=>{
          selectedTeacher = teacher;
          [...teachersFilter.children].forEach(c=>c.classList.remove('active'));
          btn.classList.add('active');
          renderVideos(selectedSubject, selectedTeacher);
        };
        teachersFilter.appendChild(btn);
      });
    }

    function renderVideos(subject, teacher=null){
      if(!isLoggedIn){ renderLoginRequired(); return; }
      videosContainer.innerHTML = '';
      selectedSubject = subject;

      let filtered = allVideos.filter(v => (v.subject || '').trim() === subject);
      if (teacher) filtered = filtered.filter(v => ((v.teacher || 'Ù…Ø¯Ø±Ø³ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ').trim() === teacher));

      if (filtered.length === 0){
        videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¯Ø±Ø³.</div>';
        return;
      }

      filtered.forEach(video=>{
        const box = document.createElement('div');
        box.className = 'video-box';

        const youtube = isYouTubeUrl(video.url);
        const ytId = youtube ? getYouTubeId(video.url) : '';
        const thumb = video.imageUrl || (youtube ? getYTThumb(ytId) : '');

        box.innerHTML = `
          <div class="video-title">${video.title || 'ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}</div>
          <div class="video-teacher">Ø§Ù„Ù…Ø¯Ø±Ø³: ${video.teacher || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
          ${youtube
            ? `
              <div class="thumb" data-url="${video.url}">
                <img src="${thumb || 'https://via.placeholder.com/300x200?text=YouTube'}" alt="thumbnail">
                <div class="play-btn">â–¶</div>
              </div>
            `
            : `
              <video controls poster="${thumb || ''}" style="width:100%; height:250px; border-radius:10px; background:#000;">
                <source src="${video.url}" type="video/mp4">
                Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
              </video>
            `
          }
        `;

        if (youtube){
          box.querySelector('.thumb').onclick = ()=>{
            // ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
            window.open(video.url, '_blank');
          };
        }

        videosContainer.appendChild(box);
      });
    }

    // Ù…ØªØ§Ø­ Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ø¯
    window.filterVideos = (subject)=>{
      if(!isLoggedIn){ renderLoginRequired(); return; }
      if (subject === 'all'){
        videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª.</div>';
        teachersFilter.innerHTML = '';
        selectedSubject = null;
        selectedTeacher = null;
        return;
      }
      selectedSubject = subject;
      selectedTeacher = null;
      renderTeachers(subject);
      videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ø§Ø®ØªØ± Ù…Ø¯Ø±Ø³Ù‹Ø§ Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª.</div>';
    };

    /* ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† Realtime Database ===== */
    const videosRef = ref(db, 'videos');
    onValue(videosRef, (snapshot)=>{
      const data = snapshot.val() || {};
      allVideos = Object.keys(data).map(k => {
        const v = data[k] || {};
        // Ø¥Ù† Ù„Ù… ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ù„Ù„ÙŠÙˆØªÙŠÙˆØ¨ØŒ Ù†Ø­Ø§ÙˆÙ„ ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        let imageUrl = v.imageUrl || '';
        if (!imageUrl && isYouTubeUrl(v.url)){
          const id = getYouTubeId(v.url);
          imageUrl = getYTThumb(id);
        }
        return {
          url: v.url,
          subject: v.subject || '',
          title: v.title || '',
          teacher: v.teacher || 'Ù…Ø¯Ø±Ø³ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
          imageUrl
        };
      });

      if (isLoggedIn){
        videosContainer.innerHTML = '<div style="text-align:center; font-size:18px; color:#ffd700;">Ø§Ø®ØªØ± Ù…Ø§Ø¯Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØµÙÙ‘Ø­.</div>';
        document.querySelector('.filter-bar').style.display = 'flex';
      } else {
        renderLoginRequired();
      }
      teachersFilter.innerHTML = '';
    });
  </script>
</body>
</html>
